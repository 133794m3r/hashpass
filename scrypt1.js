/*!
 * Fast "async" scrypt implementation in JavaScript.
 * Copyright (c) 2013-2016 Dmitry Chestnykh | MIT license
 * https://github.com/dchest/scrypt-async-js
 */
function scrypt(G,T,l,d,W,v,H,U){function C(a){function c(a){for(var c=0,y=a.length;64<=y;){var b=f,h=e,l=u,q=D,r=d,w=K,x=L,z=m,p,n,t;for(n=0;16>n;n++)t=c+4*n,k[n]=(a[t]&255)<<24|(a[t+1]&255)<<16|(a[t+2]&255)<<8|a[t+3]&255;for(n=16;64>n;n++)p=k[n-2],t=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,p=k[n-15],p=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,k[n]=(t+k[n-7]|0)+(p+k[n-16]|0)|0;for(n=0;64>n;n++)t=(((r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7))+(r&w^~r&x)|0)+(z+(g[n]+k[n]|0)|0)|0,p=((b>>>2|b<<30)^(b>>>13|b<<19)^
(b>>>22|b<<10))+(b&h^b&l^h&l)|0,z=x,x=w,w=r,r=q+t|0,q=l,l=h,h=b,b=t+p|0;f=f+b|0;e=e+h|0;u=u+l|0;D=D+q|0;d=d+r|0;K=K+w|0;L=L+x|0;m=m+z|0;c+=64;y-=64}}var g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,
773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f=1779033703,e=3144134277,u=1013904242,D=2773480762,d=1359893119,K=2600822924,L=528734635,m=1541459225,k=Array(64);c(a);var h;h=a.length%64;var l=a.length/536870912|0,
q=a.length<<3,v=56>h?56:120;a=a.slice(a.length-h,a.length);a.push(128);for(h+=1;h<v;h++)a.push(0);a.push(l>>>24&255);a.push(l>>>16&255);a.push(l>>>8&255);a.push(l>>>0&255);a.push(q>>>24&255);a.push(q>>>16&255);a.push(q>>>8&255);a.push(q>>>0&255);c(a);return[f>>>24&255,f>>>16&255,f>>>8&255,f>>>0&255,e>>>24&255,e>>>16&255,e>>>8&255,e>>>0&255,u>>>24&255,u>>>16&255,u>>>8&255,u>>>0&255,D>>>24&255,D>>>16&255,D>>>8&255,D>>>0&255,d>>>24&255,d>>>16&255,d>>>8&255,d>>>0&255,K>>>24&255,K>>>16&255,K>>>8&255,K>>>
0&255,L>>>24&255,L>>>16&255,L>>>8&255,L>>>0&255,m>>>24&255,m>>>16&255,m>>>8&255,m>>>0&255]}function X(a,c,g){function f(){for(var a=u-1;a>=u-4;a--){d[a]++;if(255>=d[a])break;d[a]=0}}a=64>=a.length?a:C(a);var e,u=64+c.length+4,d=Array(u),y=Array(64),h=[];for(e=0;64>e;e++)d[e]=54;for(e=0;e<a.length;e++)d[e]^=a[e];for(e=0;e<c.length;e++)d[64+e]=c[e];for(e=u-4;e<u;e++)d[e]=0;for(e=0;64>e;e++)y[e]=92;for(e=0;e<a.length;e++)y[e]^=a[e];for(;32<=g;)f(),h=h.concat(C(y.concat(C(d)))),g-=32;0<g&&(f(),h=h.concat(C(y.concat(C(d))).slice(0,
g)));return h}function Y(a,c,g,f){var e=a[0]^c[g++],d=a[1]^c[g++],h=a[2]^c[g++],y=a[3]^c[g++],m=a[4]^c[g++],k=a[5]^c[g++],l=a[6]^c[g++],q=a[7]^c[g++],v=a[8]^c[g++],A=a[9]^c[g++],B=a[10]^c[g++],E=a[11]^c[g++],F=a[12]^c[g++],G=a[13]^c[g++],H=a[14]^c[g++];g=a[15]^c[g++];var b,C,I=e,J=d,r=h,w=y,x=m,z=k,p=l,n=q,t=v,M=A,N=B,O=E,P=F,Q=G,R=H,S=g;for(C=0;8>C;C+=2)b=I+P,x^=b<<7|b>>>25,b=x+I,t^=b<<9|b>>>23,b=t+x,P^=b<<13|b>>>19,b=P+t,I^=b<<18|b>>>14,b=z+J,M^=b<<7|b>>>25,b=M+z,Q^=b<<9|b>>>23,b=Q+M,J^=b<<13|b>>>
19,b=J+Q,z^=b<<18|b>>>14,b=N+p,R^=b<<7|b>>>25,b=R+N,r^=b<<9|b>>>23,b=r+R,p^=b<<13|b>>>19,b=p+r,N^=b<<18|b>>>14,b=S+O,w^=b<<7|b>>>25,b=w+S,n^=b<<9|b>>>23,b=n+w,O^=b<<13|b>>>19,b=O+n,S^=b<<18|b>>>14,b=I+w,J^=b<<7|b>>>25,b=J+I,r^=b<<9|b>>>23,b=r+J,w^=b<<13|b>>>19,b=w+r,I^=b<<18|b>>>14,b=z+x,p^=b<<7|b>>>25,b=p+z,n^=b<<9|b>>>23,b=n+p,x^=b<<13|b>>>19,b=x+n,z^=b<<18|b>>>14,b=N+M,O^=b<<7|b>>>25,b=O+N,t^=b<<9|b>>>23,b=t+O,M^=b<<13|b>>>19,b=M+t,N^=b<<18|b>>>14,b=S+R,P^=b<<7|b>>>25,b=P+S,Q^=b<<9|b>>>23,b=Q+
P,R^=b<<13|b>>>19,b=R+Q,S^=b<<18|b>>>14;c[f++]=a[0]=I+e|0;c[f++]=a[1]=J+d|0;c[f++]=a[2]=r+h|0;c[f++]=a[3]=w+y|0;c[f++]=a[4]=x+m|0;c[f++]=a[5]=z+k|0;c[f++]=a[6]=p+l|0;c[f++]=a[7]=n+q|0;c[f++]=a[8]=t+v|0;c[f++]=a[9]=M+A|0;c[f++]=a[10]=N+B|0;c[f++]=a[11]=O+E|0;c[f++]=a[12]=P+F|0;c[f++]=a[13]=Q+G|0;c[f++]=a[14]=R+H|0;c[f++]=a[15]=S+g|0}function V(a,c,g,f,e){for(var d=0,h=g+16*(2*e-1),m=16;m--;)a[d++]=c[h++];for(d=0;d<2*e;d+=2)Y(a,c,g+16*d,f+8*d),Y(a,c,g+16*d+16,f+8*d+16*e)}function Z(a){for(var c=[],
g=0;g<a.length;g++){var f=a.charCodeAt(g);128>f?c.push(f):(127<f&&2048>f?c.push(f>>6|192):(c.push(f>>12|224),c.push(f>>6&63|128)),c.push(f&63|128))}return c}function aa(a){for(var c=0;c<32*d;c++){var g=a+4*c;m[0+c]=(h[g+3]&255)<<24|(h[g+2]&255)<<16|(h[g+1]&255)<<8|(h[g+0]&255)<<0}}function ba(a,c){for(var g=a;g<c;g+=2){for(var f=E,e=32*g*d,h=m,k=0,l=32*d;l--;)f[e++]=h[k++];V(F,m,0,A,d);f=E;e=32*(g+1)*d;h=m;k=A;for(l=32*d;l--;)f[e++]=h[k++];V(F,m,A,0,d)}}function ca(a,c){for(var g=a;g<c;g+=2){for(var f=
m[0+16*(2*d-1)]&q-1,e=m,h=0,k=E,f=32*f*d,l=32*d;l--;)e[h++]^=k[f++];V(F,m,0,A,d);f=m[A+16*(2*d-1)]&q-1;e=m;h=A;k=E;f*=32*d;for(l=32*d;l--;)e[h++]^=k[f++];V(F,m,A,0,d)}}function da(a){for(var c=0;c<32*d;c++){var g=m[0+c];h[a+4*c+0]=g>>>0&255;h[a+4*c+1]=g>>>8&255;h[a+4*c+2]=g>>>16&255;h[a+4*c+3]=g>>>24&255}}function ea(a,c,g,f,e){(function D(){f(a,a+g<c?a+g:c);a+=g;a<c?D():e()})()}function fa(a){var c=X(G,h,W);if("base64"===a){a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");
for(var g=c.length,f=[],e=0,d,k,l;e<g;)d=e<g?c[e++]:0,k=e<g?c[e++]:0,l=e<g?c[e++]:0,d=(d<<16)+(k<<8)+l,f.push(a[d>>>18&63]),f.push(a[d>>>12&63]),f.push(a[d>>>6&63]),f.push(a[d>>>0&63]);0<g%3&&(f[f.length-1]="=",1===g%3&&(f[f.length-2]="="));return f.join("")}if("hex"===a){a="0123456789abcdef".split("");g=c.length;f=[];for(e=0;e<g;e++)f.push(a[c[e]>>>4&15]),f.push(a[c[e]>>>0&15]);return f.join("")}return"binary"===a?new Uint8Array(c):c}function ha(){for(var a=0;a<B;a++)aa(128*a*d),ba(0,q),ca(0,q),
da(128*a*d);H(fa(U))}function ga(a){aa(128*a*d);ea(0,q,2*v,ba,function(){ea(0,q,2*v,ca,function(){da(128*a*d);a+1<B?ia(function(){ga(a+1)}):H(fa(U))})})}var B=1;if("object"===typeof l){if(4<arguments.length)throw Error("scrypt: incorrect number of arguments");var k=l;H=d;l=k.logN;if("undefined"===typeof l)if("undefined"!==typeof k.N){if(2>k.N||4294967295<k.N)throw Error("scrypt: N is out of range");if(0!==(k.N&k.N-1))throw Error("scrypt: N is not a power of 2");l=Math.log(k.N)/Math.LN2}else throw Error("scrypt: missing N parameter");
B=k.p||1;d=k.r;W=k.dkLen||32;v=k.interruptStep||0;U=k.encoding}if(1>B)throw Error("scrypt: invalid p");if(0>=d)throw Error("scrypt: invalid r");if(1>l||31<l)throw Error("scrypt: logN must be between 1 and 31");var q=1<<l>>>0,m,E,h,F;if(1073741824<=d*B||d>3.35544319921875E7/B||1.677721599609375E7<d||q>3.35544319921875E7/d)throw Error("scrypt: parameters are too large");"string"===typeof G&&(G=Z(G));"string"===typeof T&&(T=Z(T));"undefined"!==typeof Int32Array?(m=new Int32Array(64*d),E=new Int32Array(32*
q*d),F=new Int32Array(16)):(m=[],E=[],F=Array(16));h=X(G,T,128*B*d);var A=32*d,ia="undefined"!==typeof setImmediate?setImmediate:setTimeout;"function"===typeof v&&(U=H,H=v,v=1E3);0>=v?ha():ga(0)}"undefined"!==typeof module&&(module.exports=scrypt);
